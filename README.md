# 市值恒定定投法 - 统计计算程序

这是一个基于Vue 3和Element Plus开发的市值恒定定投法统计计算程序，帮助投资者记录和计算定投规划。

## 功能特点

### 🎯 核心功能
- **多产品定投计划管理**：配置多个投资产品，每个产品独立设置期定投金额和目标倍数
- **按产品独立计算**：每个产品独立计算目标市值和追加投资金额
- **期度计算**：自动计算每期每个产品的目标市值和追加投资金额
- **历史记录**：保存每期的投资数据，支持查看详情和导出
- **统计分析**：提供产品表现对比、风险分析和投资建议

### 📊 市值恒定定投法原理
1. **目标市值计算**：目标市值 = 期定投金额 × 目标倍数 × 当前期数
2. **定投金额计算**：本期定投金额 = 目标市值 - 当前总市值
3. **投资策略**：
   - 如果定投金额 > 0：需要追加投资
   - 如果定投金额 < 0：可以获利了结（卖出超出部分）
   - 如果定投金额 = 0：目标达成

## 安装和运行

### 环境要求
- Node.js 16+
- npm 或 yarn

### 安装依赖
```bash
npm install
```

### 开发模式运行
```bash
npm run dev
```

### 构建生产版本
```bash
npm run build
```

## 使用说明

### 1. 定投计划配置
- 在"定投计划"标签页中配置投资产品
- 设置产品名称、期定投金额和目标倍数
- 可以添加、删除和修改产品配置
- 每个产品都有独立的颜色标识

### 2. 期度计算（多产品独立计算）
- 在"期度计算"标签页中为每个产品输入当前市值
- 第一期时，如果还没有开始投资，当前市值可以填写0
- 系统根据期数和计划定投金额，自动计算每个产品本期应该定投多少钱
- 每个产品独立计算：
  - 目标市值 = 产品期定投金额 × 目标倍数 × 当前期数
  - 本期定投金额 = 目标市值 - 当前市值
- 保存记录后，每个产品的市值会自动更新
- 显示每个产品的累计投资金额和投资收益率
- 汇总显示所有产品的总市值、总定投金额和总收益率

### 3. 历史记录查看
- 在"历史记录"标签页中查看所有保存的期度数据
- 支持查看详情，包括每个产品的详细投资情况
- 支持删除记录和导出数据
- 提供投资趋势图表分析

### 4. 统计分析
- 在"统计分析"标签页中查看产品表现对比
- 提供风险分析指标（最大回撤、夏普比率、波动率）
- 根据当前表现给出投资策略建议

## 技术栈

- **前端框架**：Vue 3
- **UI组件库**：Element Plus
- **图表库**：ECharts
- **构建工具**：Vite
- **数据存储**：LocalStorage

## 项目结构

```
market/
├── src/
│   ├── components/
│   │   ├── InvestmentPlan.vue      # 定投计划组件
│   │   ├── WeeklyCalculation.vue   # 期度计算组件（支持多产品）
│   │   ├── InvestmentHistory.vue   # 历史记录组件
│   │   └── InvestmentAnalysis.vue  # 统计分析组件
│   ├── App.vue                     # 主应用组件
│   └── main.js                     # 应用入口
├── index.html                      # HTML模板
├── package.json                    # 项目配置
├── vite.config.js                  # Vite配置
└── README.md                       # 项目说明
```

## 数据持久化

应用使用浏览器的LocalStorage来保存数据，包括：
- 投资产品配置
- 当前期数
- 历史投资记录（包含每个产品的详细数据）

数据会自动保存，刷新页面后数据不会丢失。

## 示例数据

应用预设了6个投资产品的示例数据：
- 深成指B：期定投1200元，目标倍数2x
- 医药ETF：期定投1200元，目标倍数2x
- 恒生ETF：期定投1200元，目标倍数2x
- H股ETF：期定投1200元，目标倍数2x
- 标普ETF：期定投400元，目标倍数2x
- 华宝油气：期定投800元，目标倍数2x

## 新功能特点

### 多产品独立计算
- 每个产品独立计算目标市值和定投金额
- 支持不同产品设置不同的期定投金额和目标倍数
- 每个产品都有独立的颜色标识，便于区分
- 汇总显示所有产品的总体情况

### 详细的历史记录
- 保存每个产品的详细投资数据
- 查看历史记录时可以展开查看每个产品的详情
- 支持按产品分析投资表现

## 注意事项

1. 所有金额计算都基于人民币（CNY）
2. 收益率计算采用简单收益率公式
3. 历史数据保存在浏览器本地，清除浏览器数据会导致数据丢失
4. 建议定期导出重要数据作为备份
5. 每个产品的计算是独立的，不会相互影响

## 许可证

MIT License 